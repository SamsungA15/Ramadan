<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ù…Ø³Ø¨Ø­Ø©</title>

<style>
:root{
  --bg:#ffffff;
  --text:#000000;
  --card:#f2f2f2;
}
.dark{
  --bg:#121212;
  --text:#ffffff;
  --card:#1e1e1e;
}
body{
  margin:0;
  font-family:Arial;
  direction:rtl;
  background:var(--bg);
  color:var(--text);
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  background:var(--card);
}
button, select{
  padding:8px;
  font-size:16px;
}
section{
  display:none;
  padding:20px;
}
section.active{
  display:block;
}
.card{
  background:var(--card);
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  line-height:1.8;
}
</style>
</head>

<body>

<header>
  <button onclick="prev()">â¬… Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
  <button onclick="toggleMode()" id="modeBtn">ğŸŒ™ Ø¯Ø§ÙƒÙ†</button>
  <button onclick="next()">Ø§Ù„ØªØ§Ù„ÙŠ â¡</button>
</header>

<!-- Ø§Ù„ØµÙØ­Ø© 0 -->
<section class="active">
  <h2>ğŸŒ™ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ</h2>
  <p>Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ø£Ùˆ Ø°ÙƒØ± Ø«Ù… Ø§Ù†ØªÙ‚Ù„</p>
</section>

<!-- Ø§Ù„ØµÙØ­Ø© 1: Ø§Ø®ØªÙŠØ§Ø± Ø³ÙˆØ±Ø© -->
<section>
  <h2>ğŸ“– Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©</h2>
  <select id="surahSelect">
    <option value="">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©</option>
  </select>
</section>

<!-- Ø§Ù„ØµÙØ­Ø© 2: Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙˆØ±Ø© -->
<section>
  <h2 id="surahTitle">Ø§Ù„Ø³ÙˆØ±Ø©</h2>
  <div id="surahContent"></div>
</section>

<!-- Ø§Ù„ØµÙØ­Ø© 3: Ø§Ù„Ù…Ø³Ø¨Ø­Ø© -->
<section>
  <h2>ğŸ“¿ Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</h2>

  <select id="zikrSelect">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ±</option>
  </select>

  <h1 id="currentZikr"></h1>
  <h1 id="count">0</h1>

  <button onclick="tasbeeh()">â• ØªØ³Ø¨ÙŠØ­</button>
  <button onclick="reset()">ğŸ”„ ØªØµÙÙŠØ±</button>
</section>

<!-- Ø±Ø¨Ø· Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<script src="quran.js"></script>

<script>
/* =========================
   Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
========================= */
const pages=document.querySelectorAll("section");
let page = parseInt(localStorage.getItem("lastPage")) || 0;

function show(){
  pages.forEach(p=>p.classList.remove("active"));
  pages[page].classList.add("active");
  localStorage.setItem("lastPage", page);
}
show();

function next(){
  if(page===1 && selectedSurahIndex===null){
    alert("Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ø£ÙˆÙ„Ù‹Ø§");
    return;
  }
  if(page<pages.length-1){
    page++;
    show();
  }
}
function prev(){
  if(page>0){
    page--;
    show();
  }
}

/* =========================
   Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† / Ø§Ù„ÙØ§ØªØ­
========================= */
let dark = localStorage.getItem("darkMode")==="true";

if(dark){
  document.body.classList.add("dark");
  document.getElementById("modeBtn").textContent="â˜€ ÙØ§ØªØ­";
}

function toggleMode(){
  dark=!dark;
  document.body.classList.toggle("dark");
  document.getElementById("modeBtn").textContent=dark?"â˜€ ÙØ§ØªØ­":"ğŸŒ™ Ø¯Ø§ÙƒÙ†";
  localStorage.setItem("darkMode", dark);
}

/* =========================
   Ø§Ù„Ù‚Ø±Ø¢Ù† + Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
========================= */
const surahSelect=document.getElementById("surahSelect");
const surahContent=document.getElementById("surahContent");
const surahTitle=document.getElementById("surahTitle");

let selectedSurahIndex = localStorage.getItem("lastSurah");
if(selectedSurahIndex!==null){
  selectedSurahIndex = parseInt(selectedSurahIndex);
}

quran.forEach((s,i)=>{
  const o=document.createElement("option");
  o.value=i;
  o.textContent=s.name;
  surahSelect.appendChild(o);
});

if(selectedSurahIndex!==null){
  surahSelect.value = selectedSurahIndex;
}

surahSelect.onchange=()=>{
  selectedSurahIndex = parseInt(surahSelect.value);
  localStorage.setItem("lastSurah", selectedSurahIndex);
};

function loadSurah(){
  if(selectedSurahIndex===null) return;
  surahContent.innerHTML="";
  const surah = quran[selectedSurahIndex];
  surahTitle.textContent = surah.name;
  surah.ayahs.forEach((a,i)=>{
    const d=document.createElement("div");
    d.className="card";
    d.textContent=(i+1)+" - "+a.text;
    surahContent.appendChild(d);
  });
}

/* =========================
   ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© Ø¹Ù†Ø¯ ÙØªØ­ ØµÙØ­ØªÙ‡Ø§
========================= */
const observer=new MutationObserver(()=>{
  if(page===2){
    loadSurah();
  }
});
observer.observe(document.body,{attributes:true,subtree:true});

/* =========================
   Ø§Ù„Ù…Ø³Ø¨Ø­Ø© + Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
========================= */
const azkar=[
"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡",
"Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡",
"Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±",
"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡",
"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡",
"Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡",
"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡",
"Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
"Ø§Ù„Ù„Ù‡Ù… ØµÙ„ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯",
"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª Ø³Ø¨Ø­Ø§Ù†Ùƒ Ø¥Ù†ÙŠ ÙƒÙ†Øª Ù…Ù† Ø§Ù„Ø¸Ø§Ù„Ù…ÙŠÙ†",
"Ø­Ø³Ø¨Ù†Ø§ Ø§Ù„Ù„Ù‡ ÙˆÙ†Ø¹Ù… Ø§Ù„ÙˆÙƒÙŠÙ„"
];

const zikrSelect=document.getElementById("zikrSelect");
const currentZikr=document.getElementById("currentZikr");
let count = parseInt(localStorage.getItem("tasbeehCount")) || 0;

azkar.forEach(z=>{
  const o=document.createElement("option");
  o.value=z;
  o.textContent=z;
  zikrSelect.appendChild(o);
});

document.getElementById("count").textContent = count;

const savedZikr = localStorage.getItem("lastZikr");
if(savedZikr){
  zikrSelect.value = savedZikr;
  currentZikr.textContent = savedZikr;
}

zikrSelect.onchange=()=>{
  currentZikr.textContent = zikrSelect.value;
  localStorage.setItem("lastZikr", zikrSelect.value);
  reset();
};

function tasbeeh(){
  if(!zikrSelect.value){
    alert("Ø§Ø®ØªØ± Ø°ÙƒØ±Ù‹Ø§ Ø£ÙˆÙ„Ù‹Ø§");
    return;
  }
  count++;
  document.getElementById("count").textContent = count;
  localStorage.setItem("tasbeehCount", count);
}

function reset(){
  count = 0;
  document.getElementById("count").textContent = count;
  localStorage.setItem("tasbeehCount", count);
}
</script>

</body>
</html>
