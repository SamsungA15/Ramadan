<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø±Ù…Ø¶Ø§Ù† | Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø±</title>

<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  background:#f5f5f5;
  color:#000;
}
body.dark{
  background:#121212;
  color:#fff;
}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  background:#2c7a7b;
  color:#fff;
}
button{
  padding:8px 12px;
  margin:5px;
  cursor:pointer;
}
.page{
  display:none;
  padding:15px;
}
.page.active{
  display:block;
}
.card{
  padding:10px;
  margin:5px 0;
  border:1px solid #ccc;
}
.card.active{
  background:#ffeaa7;
}
select{
  width:100%;
  padding:8px;
}
.counter{
  font-size:32px;
  text-align:center;
  margin:20px;
}
</style>
</head>

<body>

<header>
  <button onclick="goBack()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
  <button id="themeBtn" onclick="toggleTheme()">Ø¯Ø§ÙƒÙ†</button>
  <button onclick="goNext()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</header>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="home" class="page active">
  <h2>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</h2>
  <button onclick="openPage('quranPage')">ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù†</button>
  <button onclick="openPage('athkarPage')">ğŸ¤² Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
  <button onclick="openPage('tasbeehPage')">ğŸ“¿ Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<div id="quranPage" class="page">
  <h2>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
  <select id="surahSelect">
    <option value="">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©</option>
  </select>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ø³ÙˆØ±Ø© -->
<div id="surahPage" class="page">
  <h2 id="surahTitle"></h2>
  <div id="surahContent"></div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± -->
<div id="athkarPage" class="page">
  <h2>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h2>
  <div class="card">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</div>
  <div class="card">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</div>
  <div class="card">Ø£Ø°ÙƒØ§Ø± Ø±Ù…Ø¶Ø§Ù†</div>
  <div class="card">Ø£Ø°ÙƒØ§Ø± Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±</div>
  <div class="card">Ø£Ø°ÙƒØ§Ø± ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©</div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø³Ø¨Ø­Ø© -->
<div id="tasbeehPage" class="page">
  <h2>Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</h2>

  <select id="zikrSelect">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ±</option>
    <option>Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</option>
    <option>Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</option>
    <option>Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</option>
    <option>Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡</option>
    <option>Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡</option>
    <option>Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</option>
  </select>

  <div class="counter" id="count">0</div>

  <button onclick="increment()">ØªØ³Ø¨ÙŠØ­</button>
  <button onclick="reset()">ØªØµÙÙŠØ±</button>
</div>

<!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<script src="quran.js"></script>

<script>
/* ================== Ù…ØªØºÙŠØ±Ø§Øª ================== */
let historyPages=["home"];
let currentIndex=0;
let surahList=[];
let selectedSurahIndex=null;
let count=0;

const surahSelect=document.getElementById("surahSelect");
const surahTitle=document.getElementById("surahTitle");
const surahContent=document.getElementById("surahContent");
const themeBtn=document.getElementById("themeBtn");

/* ================== Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ ================== */
if(localStorage.theme==="dark"){
  document.body.classList.add("dark");
  themeBtn.textContent="ÙØ§ØªØ­";
}
if(localStorage.count){
  count=Number(localStorage.count);
  document.getElementById("count").textContent=count;
}

/* ================== ØªÙ†Ù‚Ù„ ================== */
function openPage(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  historyPages.push(id);
  currentIndex=historyPages.length-1;
}
function goBack(){
  if(currentIndex>0){
    currentIndex--;
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(historyPages[currentIndex]).classList.add("active");
  }
}
function goNext(){
  if(document.getElementById("quranPage").classList.contains("active")){
    loadSurah();
    openPage("surahPage");
  }
}

/* ================== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ================== */
function toggleTheme(){
  document.body.classList.toggle("dark");
  let dark=document.body.classList.contains("dark");
  themeBtn.textContent=dark?"ÙØ§ØªØ­":"Ø¯Ø§ÙƒÙ†";
  localStorage.theme=dark?"dark":"light";
}

/* ================== ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù‚Ø±Ø¢Ù† ================== */
(function prepareQuran(){
  if(Array.isArray(quran)){
    surahList=quran;
  }else if(quran.surahs){
    surahList=quran.surahs;
  }else{
    surahList=Object.values(quran);
  }

  surahList.forEach((s,i)=>{
    const o=document.createElement("option");
    o.value=i;
    o.textContent=s.name||("Ø³ÙˆØ±Ø© "+(i+1));
    surahSelect.appendChild(o);
  });

  if(localStorage.surah){
    selectedSurahIndex=Number(localStorage.surah);
    surahSelect.value=selectedSurahIndex;
  }
})();

surahSelect.onchange=()=>{
  selectedSurahIndex=Number(surahSelect.value);
  localStorage.surah=selectedSurahIndex;
};

/* ================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© + Ø­ÙØ¸ Ø¢Ø®Ø± Ø¢ÙŠØ© ================== */
function loadSurah(){
  if(selectedSurahIndex===null) return;

  surahContent.innerHTML="";
  const surah=surahList[selectedSurahIndex];
  surahTitle.textContent=surah.name||"Ø³ÙˆØ±Ø©";

  let ayahs=surah.ayahs||surah.verses||surah.ayat||surah.text||[];
  if(!Array.isArray(ayahs)) ayahs=Object.values(ayahs);

  let lastAyah=Number(localStorage.lastAyah)||0;

  ayahs.forEach((a,i)=>{
    const d=document.createElement("div");
    d.className="card";
    if(i===lastAyah) d.classList.add("active");

    const text=a.text||a.aya||a.content||a;
    d.textContent=(i+1)+" - "+text;

    d.onclick=()=>{
      localStorage.lastAyah=i;
      document.querySelectorAll(".card").forEach(c=>c.classList.remove("active"));
      d.classList.add("active");
    };

    surahContent.appendChild(d);

    if(i===lastAyah){
      setTimeout(()=>d.scrollIntoView({behavior:"smooth"}),300);
    }
  });
}

/* ================== Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ================== */
function increment(){
  if(!zikrSelect.value) return;
  count++;
  document.getElementById("count").textContent=count;
  localStorage.count=count;
}
function reset(){
  count=0;
  document.getElementById("count").textContent=0;
  localStorage.count=0;
}
</script>

</body>
</html>
