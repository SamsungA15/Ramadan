<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>

<style>
body {
  font-family: Tahoma, Arial;
  background: #f5f5f5;
  color: #000;
  margin: 0;
  padding: 20px;
  transition: 0.3s;
}

.dark {
  background: #121212;
  color: #fff;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

select, button {
  padding: 8px;
  margin: 5px;
  font-size: 16px;
}

#ayahBox {
  margin-top: 20px;
  line-height: 2;
  font-size: 20px;
}
</style>
</head>

<body>

<header>
  <h2>ðŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
  <button id="toggleTheme">ðŸŒ™</button>
</header>

<hr>

<label>Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©:</label><br>
<select id="surahSelect">
  <option value="">-- Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© --</option>
</select>

<div id="ayahBox"></div>

<div style="margin-top:20px;">
  <button id="prevAyah">â¬… Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
  <button id="nextAyah">Ø§Ù„ØªØ§Ù„ÙŠ âž¡</button>
</div>

<!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† -->
<script src="quran.js"></script>

<script>
let currentSurah = null;
let currentAyah = 0;

/* Ø¹Ù†Ø§ØµØ± */
const select = document.getElementById("surahSelect");
const ayahBox = document.getElementById("ayahBox");
const nextBtn = document.getElementById("nextAyah");
const prevBtn = document.getElementById("prevAyah");
const themeBtn = document.getElementById("toggleTheme");

/* ØªØ¹Ø¨Ø¦Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³ÙˆØ± */
quran.forEach(surah => {
  const option = document.createElement("option");
  option.value = surah.id;
  option.textContent = surah.name;
  select.appendChild(option);
});

/* ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø­ÙØ¸ */
const saved = JSON.parse(localStorage.getItem("quranProgress"));
if (saved) {
  select.value = saved.surahId;
  loadSurah(saved.surahId, saved.ayahIndex);
}

/* Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø³ÙˆØ±Ø© */
select.addEventListener("change", () => {
  loadSurah(select.value, 0);
});

/* ØªØ­Ù…ÙŠÙ„ Ø³ÙˆØ±Ø© */
function loadSurah(id, ayahIndex = 0) {
  currentSurah = quran.find(s => s.id == id);
  if (!currentSurah) return;

  currentAyah = ayahIndex;
  showAyah();
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ© */
function showAyah() {
  const ayah = currentSurah.verses[currentAyah];
  if (!ayah) return;

  ayahBox.innerHTML = `
    <h3>${currentSurah.name}</h3>
    <p>${ayah.text}</p>
    <small>Ø¢ÙŠØ© ${currentAyah + 1} Ù…Ù† ${currentSurah.total_verses}</small>
  `;

  saveProgress();
}

/* Ø§Ù„ØªØ§Ù„ÙŠ */
nextBtn.onclick = () => {
  if (currentAyah < currentSurah.verses.length - 1) {
    currentAyah++;
    showAyah();
  }
};

/* Ø§Ù„Ø³Ø§Ø¨Ù‚ */
prevBtn.onclick = () => {
  if (currentAyah > 0) {
    currentAyah--;
    showAyah();
  }
};

/* Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ */
function saveProgress() {
  localStorage.setItem("quranProgress", JSON.stringify({
    surahId: currentSurah.id,
    ayahIndex: currentAyah
  }));
}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† */
themeBtn.onclick = () => {
  document.body.classList.toggle("dark");
  localStorage.setItem("theme",
    document.body.classList.contains("dark") ? "dark" : "light"
  );
};

/* Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ÙˆØ¶Ø¹ */
if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark");
}
</script>

</body>
</html>
