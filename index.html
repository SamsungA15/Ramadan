<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>القرآن الكريم</title>

<style>
body {
  font-family: Amiri, serif;
  margin: 0;
  background: #f4f4f4;
}
header {
  background: #2f7d7b;
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 20px;
}
nav {
  display: flex;
  justify-content: space-around;
  background: #ddd;
  padding: 10px;
}
nav button {
  padding: 8px 12px;
}
select, button {
  width: 95%;
  margin: 10px auto;
  padding: 10px;
  font-size: 16px;
  display: block;
}
.ayah {
  background: white;
  margin: 8px;
  padding: 12px;
  border-radius: 8px;
  line-height: 2;
}
</style>
</head>

<body>

<header>القرآن الكريم</header>

<nav>
  <button onclick="location.href='adhkar.html'">الأذكار</button>
  <button onclick="location.href='tasbeeh.html'">المسبحة</button>
</nav>

<select id="surahSelect">
  <option value="">اختر السورة</option>
</select>

<button onclick="openSurah()">التالي</button>

<div id="ayahContainer"></div>

<script src="quran.js"></script>

<script>
const surahSelect = document.getElementById("surahSelect");
const ayahContainer = document.getElementById("ayahContainer");

Object.keys(quran).forEach(name => {
  const opt = document.createElement("option");
  opt.value = name;
  opt.textContent = name;
  surahSelect.appendChild(opt);
});

function openSurah() {
  const name = surahSelect.value;
  if (!name) return;

  localStorage.setItem("lastSurah", name);
  ayahContainer.innerHTML = "";

  quran[name].forEach((ayah, i) => {
    const text =
      typeof ayah === "string"
        ? ayah
        : ayah.text || ayah.arabic || Object.values(ayah)[0];

    const div = document.createElement("div");
    div.className = "ayah";
    div.textContent = `${i + 1} - ${text}`;
    div.onclick = () => localStorage.setItem("lastAyah", i);
    ayahContainer.appendChild(div);
  });

  const lastAyah = localStorage.getItem("lastAyah");
  if (lastAyah) {
    ayahContainer.children[lastAyah]?.scrollIntoView({behavior:"smooth"});
  }
}

// استرجاع آخر سورة
const lastSurah = localStorage.getItem("lastSurah");
if (lastSurah) {
  surahSelect.value = lastSurah;
  openSurah();
}
</script>

</body>
</html>
